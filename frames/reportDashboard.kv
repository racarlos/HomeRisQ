#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import FadeTransition kivy.uix.screenmanager.FadeTransition

# Set colors
#:set metricBackground get_color_from_hex("#0D1117")
#:set darkGray get_color_from_hex("#212121")
#:set lightGray get_color_from_hex("#718089")
#:set darkBlue get_color_from_hex("#155075") 
#:set lightBlue get_color_from_hex("#2b96d4")
#:set orange get_color_from_hex("#F7C14C")
#:set white get_color_from_hex("#FFFFFF")
#:set black get_color_from_hex("#000000")

# Set Variables
#: set card_elevation 20
#: set topMetrics 50
#: set subtext_height 0.2
#: set topIconSize 30
#: set supportTextHeight 0.20

<ReportDashboard>:

    ScrollView:
        do_scroll_y: True

        MDGridLayout:
            adaptive_height: True
            rows: 2
            cols: 1 
            size_hint_x: 1.0
            size_hint_y: None
            height: self.minimum_height

            # Upper Box for Displaying 3 Cards of Top 3 Metrics
            MDGridLayout:
                rows: 1
                cols: 3
                size_hint_y: None
                height: root.height*0.6
                padding: 35
                spacing: 35
                                        
                # Card for Count of Severe Vulnerabilities
                MDCard:
                    elevation: card_elevation
                    orientation: "vertical"
                    md_bg_color: darkGray

                    MDLabel:
                        markup: True
                        halign: 'center'
                        theme_text_color: 'Custom'
                        text_color: orange
                        font_size: topMetrics
                        text: '[b]' + str(root.data.highRiskVulnCount) + '[/b]'

                    MDLabel:
                        markup: True
                        size_hint_y: supportTextHeight
                        halign: 'center'
                        theme_text_color: 'Custom'
                        text_color: white
                        text: 'Out of [b]' + str(root.data.totalVulnerabilities) +  '[/b] vulnerabilities found'


                    # Footer
                    MDBoxLayout:
                        size_hint_y: subtext_height
                        md_bg_color: darkBlue

                        MDIcon:
                            icon: 'biohazard'
                            size_hint_x: 0.3
                            theme_text_color: 'Custom'
                            font_size: topIconSize
                            text_color: white
                            halign: 'center'

                        MDLabel:
                            size_hint_x: 0.7
                            halign: 'left'
                            font_style: 'Button'
                            theme_text_color: 'Custom'
                            text_color: white
                            text: 'Severe vulnerabilities Count'

                # Card for Aggregated Network Score
                MDCard:
                    elevation: card_elevation
                    orientation: "vertical"
                    md_bg_color: darkGray

                    MDLabel:
                        markup: True
                        halign: 'center'
                        theme_text_color: 'Custom'
                        text_color: orange
                        font_size: topMetrics
                        text:  '[b]' + str(root.data.aggregatedRisk)  + '[/b]'

                    MDLabel:
                        markup: True
                        size_hint_y: supportTextHeight
                        halign: 'center'
                        theme_text_color: 'Custom'
                        text_color: white
                        text: root.data.assessment

                    # Footer
                    MDBoxLayout:
                        size_hint_y: subtext_height
                        md_bg_color: darkBlue

                        MDIcon:
                            icon: 'security'
                            size_hint_x: 0.3
                            font_size: topIconSize
                            theme_text_color: 'Custom'
                            text_color: white
                            halign: 'center'

                        MDLabel:
                            size_hint_x: 0.7
                            halign: 'left'
                            theme_text_color: 'Custom'
                            text_color: white
                            font_style: 'Button'
                            text: 'Aggregated Network Score'

                # Card for Most Compromised Host 
                MDCard:
                    elevation: card_elevation
                    orientation: "vertical"
                    md_bg_color: darkGray

                    MDLabel:
                        markup: True
                        halign: 'center'
                        theme_text_color: 'Custom'
                        text_color: orange
                        font_size: topMetrics
                        text: '[b]' + str(root.data.mostVulnerableHost) + '[/b]'

                    MDLabel:
                        markup: True
                        theme_text_color: 'Custom'
                        text_color: white
                        size_hint_y: supportTextHeight
                        halign: 'center'
                        text: 'Among the [b]' + str(root.data.hostCount) + '[/b] hosts found'  

                    # Footer
                    MDBoxLayout:
                        size_hint_y: subtext_height
                        md_bg_color: darkBlue

                        MDIcon:
                            icon: 'ip-network'
                            size_hint_x: 0.3
                            font_size: topIconSize
                            theme_text_color: 'Custom'
                            text_color: white
                            halign: 'center'

                        MDLabel:
                            size_hint_x: 0.7
                            markup: True
                            halign: 'left'
                            font_style: 'Button'
                            text: 'Most Compromised Host'
                            theme_text_color: 'Custom'
                            text_color: white
                
            # Lower Box for Additional Data
            MDGridLayout:
                cols: 1
                adaptive_height: True
                id: additionalData
                md_bg_color: darkBlue
