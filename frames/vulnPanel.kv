#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import FadeTransition kivy.uix.screenmanager.FadeTransition

# Set colors
#:set metricBackground get_color_from_hex("#0D1117")
#:set darkGray get_color_from_hex("#212121")
#:set lightGray get_color_from_hex("#718089")
#:set darkBlue get_color_from_hex("#155075") 
#:set lightBlue get_color_from_hex("#2b96d4")
#:set orange get_color_from_hex("#F7C14C")
#:set white get_color_from_hex("#FFFFFF")
#:set black get_color_from_hex("#000000")

# Set Variables
#: set card_elevation 20
#: set topMetrics 50
#: set subtext_height 0.2
#: set topIconSize 30
#: set supportTextHeight 0.20


#===================== Host Panel
<VulnPanel>:
    size_hint: 1, None
    height: upperBox.height + lowerBox.height
    orientation: "vertical"

    # Upper Box for Primary vulnerability Data
    MDBoxLayout:
        id: upperBox
        size_hint: 1, None
        md_bg_color: darkGray

        # Left Box
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.6
            spacing: 5
            padding: [0,10]
            # Box for Vuln Description
            MDBoxLayout:
                orientation: 'horizontal'
                padding: [10,5]

                MDBoxLayout:
                    size_hint_x: 0.25
                    MDLabel:
                        theme_text_color: "Custom"
                        text_color: white
                        markup: True
                        text: '[b]Description: [/b]' 
                MDBoxLayout:
                    size_hint_x: 0.75
                    MDLabel:
                        theme_text_color: "Custom"
                        text_color: white
                        halign: 'left'
                        text: str(root.data.name)

            # Box for Threat Family 
            MDBoxLayout:
                orientation: 'horizontal'
                padding: [10,5]

                MDBoxLayout:
                    size_hint_x: 0.25
                    MDLabel:
                        theme_text_color: "Custom"
                        text_color: white
                        markup: True
                        text: '[b]Threat Family: [/b]' 
                MDBoxLayout:
                    size_hint_x: 0.75
                    MDLabel:
                        theme_text_color: "Custom"
                        text_color: white
                        halign: 'left'
                        text: str(root.data.threatFamily)

            # Box for Solution Type 
            MDBoxLayout:
                orientation: 'horizontal'
                padding: [10,5]

                MDBoxLayout:
                    size_hint_x: 0.25
                    MDLabel:
                        markup: True
                        text: '[b]Solution Type: [/b]'
                        theme_text_color: "Custom"
                        text_color: white

                MDBoxLayout:
                    size_hint_x: 0.75
                    
                    MDIcon:
                        size_hint_x: None
                        width: self.texture_size[1]
                        icon: root.data.solutionIcon
                        theme_text_color: 'Custom'
                        text_color: white
                        halign: 'left'
                    
                    MDLabel:
                        markup: True
                        id: solutionType
                        text: '  ' + str(root.data.solution['@type']) 
                        theme_text_color: "Custom"
                        text_color: white

        # Right Box
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_x: 0.4
            spacing: 5
            padding: [0,10]


            # Box for Vector
            MDBoxLayout:
                orientation: 'horizontal'
                padding: [10,5]

                MDBoxLayout:
                    size_hint_x: 0.25
                    MDLabel:
                        markup: True
                        text: '[b]Vector: [/b]' 
                        theme_text_color: "Custom"
                        text_color: white
                MDBoxLayout:

                    size_hint_x: 0.75
                    MDLabel:
                        theme_text_color: "Custom"
                        text_color: white
                        halign: 'left'
                        text: str(root.data.vector)

            # Box for Quality detection
            MDBoxLayout:
                orientation: 'horizontal'
                padding: [10,5]

                MDBoxLayout:
                    size_hint_x: 0.25
                    MDLabel:
                        theme_text_color: "Custom"
                        text_color: white
                        markup: True
                        text: '[b]Reliability: [/b]' 
                MDBoxLayout:
                    size_hint_x: 0.75
                    MDLabel:
                        theme_text_color: "Custom"
                        text_color: white
                        halign: 'left'  
                        text: str(root.data.qod)

            
            # Box for Risk Score
            MDBoxLayout:
                orientation: 'horizontal'
                padding: [10,5]
                
                MDBoxLayout:
                    size_hint_x: 0.25
                    MDLabel:
                        markup: True
                        text: '[b]Risk Score: [/b]'
                        theme_text_color: "Custom"
                        text_color: white

                MDBoxLayout:
                    size_hint_x: 0.75
                    MDLabel:
                        markup: True
                        id: solutionType
                        text: str(root.data.risk)
                        theme_text_color: "Custom"
                        text_color: white
    
    # Solution Description
    MDBoxLayout:
        id: lowerBox
        orientation: "vertical"
        md_bg_color: darkGray
        size_hint: 1, None
        padding: [10,5]

        MDLabel:
            markup: True
            height: self.texture_size[1]
            id: solutionDescription
            text: '[b]Solution Description:  [/b]' + str(root.data.solution['#text'])
            theme_text_color: "Custom"
            text_color: orange